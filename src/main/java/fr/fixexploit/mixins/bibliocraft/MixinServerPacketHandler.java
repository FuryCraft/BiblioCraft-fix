package fr.fixexploit.mixins.bibliocraft;

import jds.bibliocraft.items.ItemLoader;
import jds.bibliocraft.tileentities.TileEntityMapFrame;
import net.minecraft.entity.player.EntityPlayerMP;
import net.minecraft.item.ItemStack;
import net.minecraft.nbt.NBTTagCompound;
import org.spongepowered.asm.mixin.Mixin;
import jds.bibliocraft.network.ServerPacketHandler;
import org.spongepowered.asm.mixin.injection.At;
import org.spongepowered.asm.mixin.injection.Inject;
import org.spongepowered.asm.mixin.injection.callback.CallbackInfo;

@Mixin(value = ServerPacketHandler.class, remap = false)
public class MixinServerPacketHandler {

    @Inject(method = "transferWaypointsToAtlas", at = @At(value = "HEAD"), cancellable = true)
    public void checkBefore(TileEntityMapFrame frameTile, ItemStack atlasStack, EntityPlayerMP player, CallbackInfo ci)
    {
        if (player.inventory.getCurrentItem() == null || player.inventory.getCurrentItem().getItem() != ItemLoader.bookAtlas || atlasStack.getItem() != ItemLoader.bookAtlas)
        {
            ci.cancel();
        }

    }

}
